# Intent Invite Links Operations

# Queries
query IntentInviteLinks($intentId: ID!, $includeRevoked: Boolean = false) {
  intentInviteLinks(intentId: $intentId, includeRevoked: $includeRevoked) {
    id
    intentId
    code
    label
    maxUses
    usedCount
    expiresAt
    createdById
    createdBy {
      id
      name
    }
    revokedAt
    revokedById
    revokedBy {
      id
      name
    }
    createdAt
    updatedAt
    isExpired
    isMaxedOut
    isRevoked
    isValid
    uses {
      id
      userId
      usedAt
      user {
        id
        name
      }
    }
  }
}

query IntentInviteLink($id: ID, $code: String) {
  intentInviteLink(id: $id, code: $code) {
    id
    intentId
    code
    label
    maxUses
    usedCount
    expiresAt
    createdById
    createdBy {
      id
      name
    }
    revokedAt
    revokedById
    revokedBy {
      id
      name
    }
    createdAt
    updatedAt
    isExpired
    isMaxedOut
    isRevoked
    isValid
  }
}

query ValidateInviteLink($code: String!) {
  validateInviteLink(code: $code) {
    valid
    reason
    link {
      id
      code
      label
      maxUses
      usedCount
      expiresAt
      isExpired
      isMaxedOut
      isRevoked
      isValid
    }
    intent {
      id
      title
      description
      startAt
      endAt
      lat
      lng
      address
      joinedCount
      max
      isFull
      owner {
        id
        name
      }
    }
  }
}

# Mutations
mutation CreateIntentInviteLink($input: CreateIntentInviteLinkInput!) {
  createIntentInviteLink(input: $input) {
    id
    intentId
    code
    label
    maxUses
    usedCount
    expiresAt
    createdById
    createdBy {
      id
      name
    }
    createdAt
    updatedAt
    isExpired
    isMaxedOut
    isRevoked
    isValid
  }
}

mutation UpdateIntentInviteLink(
  $id: ID!
  $input: UpdateIntentInviteLinkInput!
) {
  updateIntentInviteLink(id: $id, input: $input) {
    id
    intentId
    code
    label
    maxUses
    usedCount
    expiresAt
    updatedAt
    isExpired
    isMaxedOut
    isRevoked
    isValid
  }
}

mutation RevokeIntentInviteLink($id: ID!) {
  revokeIntentInviteLink(id: $id) {
    id
    intentId
    revokedAt
    revokedById
    revokedBy {
      id
      name
    }
    isRevoked
    isValid
  }
}

mutation DeleteIntentInviteLink($id: ID!) {
  deleteIntentInviteLink(id: $id)
}

mutation JoinByInviteLink($code: String!) {
  joinByInviteLink(code: $code) {
    id
    title
    description
    startAt
    endAt
    lat
    lng
    address
    joinedCount
    max
    isFull
  }
}
