# Event Invite Links Operations

# Queries
query EventInviteLinks($eventId: ID!, $includeRevoked: Boolean = false) {
  eventInviteLinks(eventId: $eventId, includeRevoked: $includeRevoked) {
    id
    eventId
    code
    label
    maxUses
    usedCount
    expiresAt
    createdById
    createdBy {
      id
      name
    }
    revokedAt
    revokedById
    revokedBy {
      id
      name
    }
    createdAt
    updatedAt
    isExpired
    isMaxedOut
    isRevoked
    isValid
    uses {
      id
      userId
      usedAt
      user {
        id
        name
        avatarKey
        avatarBlurhash
      }
    }
  }
}

query EventInviteLink($id: ID, $code: String) {
  eventInviteLink(id: $id, code: $code) {
    id
    eventId
    code
    label
    maxUses
    usedCount
    expiresAt
    createdById
    createdBy {
      id
      name
      avatarKey
      avatarBlurhash
    }
    revokedAt
    revokedById
    revokedBy {
      id
      name
      avatarKey
      avatarBlurhash
    }
    createdAt
    updatedAt
    isExpired
    isMaxedOut
    isRevoked
    isValid
  }
}

query ValidateInviteLink($code: String!) {
  validateInviteLink(code: $code) {
    valid
    reason
    link {
      id
      code
      label
      maxUses
      usedCount
      expiresAt
      isExpired
      isMaxedOut
      isRevoked
      isValid
    }
    event {
      id
      title
      description
      startAt
      endAt
      lat
      lng
      address
      joinedCount
      max
      isFull
      owner {
        id
        name
        avatarKey
        avatarBlurhash
      }
    }
  }
}

# Mutations
mutation CreateEventInviteLink($input: CreateEventInviteLinkInput!) {
  createEventInviteLink(input: $input) {
    id
    eventId
    code
    label
    maxUses
    usedCount
    expiresAt
    createdById
    createdBy {
      id
      name
      avatarKey
      avatarBlurhash
    }
    createdAt
    updatedAt
    isExpired
    isMaxedOut
    isRevoked
    isValid
  }
}

mutation UpdateEventInviteLink($id: ID!, $input: UpdateEventInviteLinkInput!) {
  updateEventInviteLink(id: $id, input: $input) {
    id
    eventId
    code
    label
    maxUses
    usedCount
    expiresAt
    updatedAt
    isExpired
    isMaxedOut
    isRevoked
    isValid
  }
}

mutation RevokeEventInviteLink($id: ID!) {
  revokeEventInviteLink(id: $id) {
    id
    eventId
    revokedAt
    revokedById
    revokedBy {
      id
      name
      avatarKey
      avatarBlurhash
    }
    isRevoked
    isValid
  }
}

mutation DeleteEventInviteLink($id: ID!) {
  deleteEventInviteLink(id: $id)
}

mutation JoinByInviteLink($code: String!) {
  joinByInviteLink(code: $code) {
    id
    title
    description
    startAt
    endAt
    lat
    lng
    address
    joinedCount
    max
    isFull
  }
}
