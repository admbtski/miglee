# =============================================================================
# Notification Queries
# =============================================================================

# Get notifications for a user
query GetNotifications(
  $recipientId: ID!
  $unreadOnly: Boolean = false
  $entityType: NotificationEntity
  $limit: Int = 50
  $offset: Int = 0
) {
  notifications(
    recipientId: $recipientId
    unreadOnly: $unreadOnly
    entityType: $entityType
    limit: $limit
    offset: $offset
  ) {
    ...NotificationsResultCore
  }
}

# =============================================================================
# Notification Mutations
# =============================================================================

# Add a notification (system/admin use)
mutation AddNotification(
  $recipientId: ID!
  $kind: NotificationKind = SYSTEM
  $title: String
  $body: String
  $data: JSON
  $entityType: NotificationEntity = OTHER
  $entityId: ID
) {
  addNotification(
    recipientId: $recipientId
    kind: $kind
    title: $title
    body: $body
    data: $data
    entityType: $entityType
    entityId: $entityId
  ) {
    ...NotificationCore
  }
}

# Mark a single notification as read
mutation MarkNotificationRead($id: ID!) {
  markNotificationRead(id: $id)
}

# Mark all notifications as read for a user
mutation MarkAllNotificationsRead($recipientId: ID!) {
  markAllNotificationsRead(recipientId: $recipientId)
}

# Delete a notification
mutation DeleteNotification($id: ID!) {
  deleteNotification(id: $id)
}

# =============================================================================
# Notification Subscriptions
# =============================================================================

# Subscribe to new notifications for a user
subscription NotificationAdded($recipientId: ID!) {
  notificationAdded(recipientId: $recipientId) {
    ...NotificationCore
  }
}

subscription NotificationBadgeChanged($recipientId: ID!) {
  notificationBadgeChanged(recipientId: $recipientId) {
    ...NotificationBadgeChangedCore
  }
}
