# =============================================================================
# Intent Queries
# =============================================================================

query GetIntents(
  $limit: Int = 20
  $offset: Int = 0
  $visibility: Visibility
  $joinMode: JoinMode
  $ownerId: ID
  $memberId: ID
  $upcomingAfter: DateTime
  $endingBefore: DateTime
  $categorySlugs: [String!]
  $tagSlugs: [String!]
  $levels: [Level!]
  $kinds: [MeetingKind!]
  $keywords: [String!]
  $status: IntentStatus
  $verifiedOnly: Boolean
  $distanceKm: Float
  $near: LocationInput
  $sortBy: IntentsSortBy = START_AT
  $sortDir: SortDir = ASC
) {
  intents(
    limit: $limit
    offset: $offset
    visibility: $visibility
    joinMode: $joinMode
    ownerId: $ownerId
    memberId: $memberId
    upcomingAfter: $upcomingAfter
    endingBefore: $endingBefore
    categorySlugs: $categorySlugs
    tagSlugs: $tagSlugs
    levels: $levels
    kinds: $kinds
    keywords: $keywords
    status: $status
    verifiedOnly: $verifiedOnly
    distanceKm: $distanceKm
    near: $near
    sortBy: $sortBy
    sortDir: $sortDir
  ) {
    ...IntentsResultCore
  }
}

# Lightweight query for lists (better performance)
# Dodano najczÄ™stsze filtry: status/kinds/levels/keywords/verifiedOnly (+near)
query GetIntentsLight(
  $limit: Int = 20
  $offset: Int = 0
  $visibility: Visibility
  $upcomingAfter: DateTime
  $endingBefore: DateTime
  $categorySlugs: [String!]
  $tagSlugs: [String!]
  $levels: [Level!]
  $kinds: [MeetingKind!]
  $keywords: [String!]
  $status: IntentStatus
  $verifiedOnly: Boolean
  $distanceKm: Float
  $near: LocationInput
  $sortBy: IntentsSortBy = START_AT
  $sortDir: SortDir = ASC
) {
  intents(
    limit: $limit
    offset: $offset
    visibility: $visibility
    upcomingAfter: $upcomingAfter
    endingBefore: $endingBefore
    categorySlugs: $categorySlugs
    tagSlugs: $tagSlugs
    levels: $levels
    kinds: $kinds
    keywords: $keywords
    status: $status
    verifiedOnly: $verifiedOnly
    distanceKm: $distanceKm
    near: $near
    sortBy: $sortBy
    sortDir: $sortDir
  ) {
    ...IntentsResultLight
  }
}

query GetIntent($id: ID!) {
  intent(id: $id) {
    ...IntentCore
  }
}

query GetIntentDetail($id: ID!) {
  intent(id: $id) {
    ...IntentDetail
  }
}

query GetIntentPermissions($intentId: ID!) {
  intentPermissions(intentId: $intentId) {
    isOwner
    isModerator
    isParticipant
    isAppAdmin
    isAppModerator
    canManage
  }
}

# =============================================================================
# Intent Mutations
# =============================================================================

mutation CreateIntent($input: CreateIntentInput!) {
  createIntent(input: $input) {
    ...IntentCore
  }
}

mutation UpdateIntent($id: ID!, $input: UpdateIntentInput!) {
  updateIntent(id: $id, input: $input) {
    ...IntentCore
  }
}

mutation DeleteIntent($id: ID!) {
  deleteIntent(id: $id)
}

mutation CancelIntent($id: ID!, $reason: String) {
  cancelIntent(id: $id, reason: $reason) {
    ...IntentCore
  }
}

mutation CloseIntentJoin($intentId: ID!, $reason: String) {
  closeIntentJoin(intentId: $intentId, reason: $reason) {
    ...IntentCore
  }
}

mutation ReopenIntentJoin($intentId: ID!) {
  reopenIntentJoin(intentId: $intentId) {
    ...IntentCore
  }
}

mutation UpdateIntentFaqs($input: UpdateIntentFaqsInput!) {
  updateIntentFaqs(input: $input) {
    id
    intentId
    order
    question
    answer
    createdAt
    updatedAt
  }
}

mutation UpdateIntentJoinQuestions($input: UpdateIntentJoinQuestionsInput!) {
  updateIntentJoinQuestions(input: $input) {
    id
    intentId
    order
    type
    label
    helpText
    required
    options
    maxLength
    createdAt
    updatedAt
  }
}
