#import "../fragments/_core.graphql"
#import "../fragments/feedback.graphql"

# Query feedback questions for an event
query EventFeedbackQuestions($eventId: ID!) {
  eventFeedbackQuestions(eventId: $eventId) {
    ...FeedbackQuestion
  }
}

# Query feedback results (owner/mod only)
query EventFeedbackResults($eventId: ID!) {
  eventFeedbackResults(eventId: $eventId) {
    ...FeedbackResults
  }
}

# Query my feedback answers
query MyFeedbackAnswers($eventId: ID!) {
  myFeedbackAnswers(eventId: $eventId) {
    ...FeedbackAnswer
  }
}

# Check if I can submit feedback
query CanSubmitFeedback($eventId: ID!) {
  canSubmitFeedback(eventId: $eventId)
}

# Create feedback question
mutation CreateFeedbackQuestion($input: CreateFeedbackQuestionInput!) {
  createFeedbackQuestion(input: $input) {
    ...FeedbackQuestion
  }
}

# Update feedback question
mutation UpdateFeedbackQuestion(
  $id: ID!
  $input: UpdateFeedbackQuestionInput!
) {
  updateFeedbackQuestion(id: $id, input: $input) {
    ...FeedbackQuestion
  }
}

# Delete feedback question
mutation DeleteFeedbackQuestion($id: ID!) {
  deleteFeedbackQuestion(id: $id)
}

# Reorder feedback questions
mutation ReorderFeedbackQuestions($eventId: ID!, $questionIds: [ID!]!) {
  reorderFeedbackQuestions(eventId: $eventId, questionIds: $questionIds) {
    ...FeedbackQuestion
  }
}

# Submit review + feedback (combined)
mutation SubmitReviewAndFeedback($input: SubmitReviewAndFeedbackInput!) {
  submitReviewAndFeedback(input: $input) {
    review {
      ...ReviewCore
    }
    feedbackAnswers {
      ...FeedbackAnswer
    }
  }
}

# Bulk update feedback questions (replaces all questions for event)
mutation UpdateEventFeedbackQuestions(
  $input: UpdateEventFeedbackQuestionsInput!
) {
  updateEventFeedbackQuestions(input: $input) {
    ...FeedbackQuestion
  }
}
