# =============================================================================
# Miglee Development Environment Variables
# =============================================================================
#
# Copy this file to .env and fill in your values:
#   cp env.example .env
#
# NEVER commit the .env file to version control!
#
# =============================================================================

# -----------------------------------------------------------------------------
# Core Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development

# JWT Secret (minimum 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=dev-jwt-secret-min-32-characters-long-change-me

# CORS Origins (comma-separated)
CORS_ORIGINS=https://your.app,https://admin.your.app,https://*.your-preview.app,http://localhost:3000,http://127.0.0.1:3000

# Log Level: fatal | error | warn | info | debug | trace | silent
LOG_LEVEL=debug
LOG_FILE_PATH=

# -----------------------------------------------------------------------------
# Database (PostgreSQL + PostGIS)
# -----------------------------------------------------------------------------
# For local development (Docker Compose)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/app?schema=public

# For Docker container-to-container communication (used inside containers)
# DATABASE_URL=postgresql://postgres:postgres@postgres:5432/app?schema=public

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
# For local development (Docker Compose)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TLS=false

# For Docker container-to-container communication
# REDIS_HOST=redis

# -----------------------------------------------------------------------------
# API Server
# -----------------------------------------------------------------------------
SERVICE_NAME=app
HOST=localhost
PORT=4000
APP_URL=http://localhost:3000
API_URL=http://localhost:4000
ASSETS_BASE_URL=http://localhost:4000

# -----------------------------------------------------------------------------
# Media Storage
# -----------------------------------------------------------------------------
# Storage provider: LOCAL | S3
MEDIA_STORAGE_PROVIDER=LOCAL

# Local storage paths
UPLOADS_PATH=./uploads
UPLOADS_TMP_PATH=./tmp/uploads

# Audit log archive path
AUDIT_ARCHIVE_PATH=./data/audit-archives

# Image processing
IMAGE_MAX_WIDTH=2560
IMAGE_MAX_HEIGHT=2560
IMAGE_FORMAT=webp
IMAGE_QUALITY=85

# Media Cleanup Configuration
ENABLE_MEDIA_CLEANUP=false  # Set to 'true' to enable (default: false)
MEDIA_CLEANUP_INTERVAL_HOURS=24  # How often to run cleanup (default: 24)
MEDIA_CLEANUP_AGE_DAYS=7    # Delete files older than X days (default: 7)

# -----------------------------------------------------------------------------
# S3 Configuration (Optional - for production or S3 testing)
# -----------------------------------------------------------------------------
# S3_ENDPOINT=https://s3.eu-central-1.amazonaws.com
# S3_REGION=eu-central-1
# S3_BUCKET=miglee-media
# S3_ACCESS_KEY_ID=your-access-key
# S3_SECRET_ACCESS_KEY=your-secret-key

# CDN Configuration
CDN_ENABLED=false
CDN_BASE_URL=

# -----------------------------------------------------------------------------
# Stripe (Payments)
# -----------------------------------------------------------------------------
# Get your keys from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_51SWZqy2N1xaGO7HMgavdM8EMsDfHJEVWKrmGQv2GpCYeYqnLhh7lb1Yqn5Xtjyv5lmNIHWE3m9DQ0A5MppnW5kcr00QFhQO89x
STRIPE_PUBLISHABLE_KEY=pk_test_51SWZqy2N1xaGO7HMPubM5l0g2JJi9tlN3QjMFKj8I6zLt76kNeHcUfApvM1xM4VxngTjQRvukmzy33TBfaYJoWF500kxVyv0s5

# Webhook signing secret
# When using Stripe CLI, get this from: stripe listen --print-secret
# When using Docker Stripe service, check logs: docker compose logs stripe
STRIPE_WEBHOOK_SECRET=whsec_34ac759f49c591dac524d95dbda5d035ae6cc4cf18b02ecd62ebb163b61eed20

# Stripe Price IDs (Optional - configure when setting up billing)
# User Plans
STRIPE_PRICE_USER_PLUS_MONTHLY_SUB=price_1SWaca2N1xaGO7HMVIp0Kdzh
STRIPE_PRICE_USER_PLUS_MONTHLY_ONEOFF=price_1SWad12N1xaGO7HMavVadocT
STRIPE_PRICE_USER_PLUS_YEARLY_ONEOFF=price_1SWadS2N1xaGO7HMQkVRAG8m
STRIPE_PRICE_USER_PRO_MONTHLY_SUB=price_1SWae02N1xaGO7HM5LLzl69m
STRIPE_PRICE_USER_PRO_MONTHLY_ONEOFF=price_1SWaei2N1xaGO7HMizq1O4u1
STRIPE_PRICE_USER_PRO_YEARLY_ONEOFF=price_1SWaf92N1xaGO7HMWnQllhMb
STRIPE_PRICE_ACTION_PACKAGE_SMALL=price_1SXDKn2N1xaGO7HM3ApypLSX
STRIPE_PRICE_ACTION_PACKAGE_MEDIUM=price_1SXDLC2N1xaGO7HMYJjRrx3N
STRIPE_PRICE_ACTION_PACKAGE_LARGE=price_1SXDLa2N1xaGO7HMtQyaYh3L
STRIPE_PRICE_EVENT_PLUS=price_1SWagC2N1xaGO7HM4ygzHC0V
STRIPE_PRICE_EVENT_PRO=price_1SWagY2N1xaGO7HMphLi3WY0

# -----------------------------------------------------------------------------
# Email (Resend)
# -----------------------------------------------------------------------------
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY=re_cRQG7BMk_6BsCrq81pLpbxj7uw8jNEQmZ
EMAIL_FROM="Miglee <noreply@miglee.pl>"

# Map
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=AIzaSyDcpZpIdRTzPiM8-Q64WuB2AsUNtWJSHVo

# -----------------------------------------------------------------------------
# Admin Features
# -----------------------------------------------------------------------------
# Enable Bull Board queue dashboard at /admin/queues
ENABLE_BULL_BOARD=true

# -----------------------------------------------------------------------------
# Next.js (Web App)
# -----------------------------------------------------------------------------
# These are used by the browser (client-side)
NEXT_PUBLIC_API_URL=http://localhost:4000/graphql
NEXT_PUBLIC_WS_URL=ws://localhost:4000/graphql

# For server-side calls inside Docker (optional)
# INTERNAL_API_URL=http://api:4000/graphql

# -----------------------------------------------------------------------------
# OpenTelemetry (Observability)
# -----------------------------------------------------------------------------
# Start observability stack first: pnpm obs:up
# Then run with: pnpm dev:obs (or export these vars manually)

# Service identification
OTEL_SERVICE_NAME=appname-api

# Collector endpoint (local Docker observability stack)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Sampling rate: 1.0 = 100% (dev), 0.1 = 10% (prod)
OTEL_TRACE_SAMPLE_RATE=1.0

# Enable/disable features
OTEL_ENABLE_TRACING=true
OTEL_ENABLE_METRICS=true
OTEL_ENABLE_LOGGING=true

# Debug mode (verbose console output)
OTEL_DEBUG=true

# Collector config variant: dev | staging | prodlike
# Used by observability stack: pnpm obs:up (uses OTEL_ENV=dev by default)
OTEL_ENV=dev

NEXT_PUBLIC_APP_ENV=development

NEXT_PUBLIC_WEB_VITALS_DISABLED=false

NEXT_PUBLIC_WEB_VITALS_SAMPLING_RATE=1.0 